---
name: Code Review & Cleanup
status: open
created: 2026-01-12T12:02:50Z
updated: 2026-01-12T12:11:36Z
github: https://github.com/PATCoder97/fhs-prosight/issues/73
depends_on: [72]
parallel: false
conflicts_with: []
---

# Task: Code Review & Cleanup

## Description

Thực hiện code review cuối cùng, cleanup code, fix ESLint errors, remove unused code, add comments nếu cần, và đảm bảo code quality đạt standard trước khi merge.

## Acceptance Criteria

- [x] No ESLint errors
- [x] No ESLint warnings (hoặc justified)
- [x] No console.log statements (except intentional debug logs với proper guards)
- [x] No commented-out code
- [x] No unused imports
- [x] No unused variables
- [x] Code formatting consistent (Prettier hoặc ESLint auto-fix)
- [x] Comments added cho complex logic (nếu cần)
- [x] Code review approved
- [x] All files committed với meaningful commit messages

## Technical Details

### Cleanup Checklist

#### 1. ESLint Fixes
**Run ESLint:**
```bash
cd frontend
npm run lint
```

**Fix auto-fixable issues:**
```bash
npm run lint -- --fix
```

**Manually fix remaining issues:**
- Unused variables
- Missing imports
- Incorrect type usage
- Any custom rule violations

#### 2. Code Quality Checks

**Files to review:**
- [x] `frontend/.env` - Verify not committed (in .gitignore)
- [x] `frontend/.env.example` - Verify committed với good documentation
- [x] `frontend/src/views/pages/authentication/AuthProvider.vue`
  - Remove unused imports (useTheme nếu không dùng)
  - Clean up authProviders array
  - Verify loginWithOAuth function clean
- [x] `frontend/src/pages/login.vue`
  - Remove unused refs (form, isPasswordVisible)
  - Clean imports (remove unused AppTextField, etc.)
  - Verify error handling logic clean
- [x] `frontend/src/pages/auth-callback.vue`
  - Add comments cho token validation logic
  - Clean URL parsing logic
  - Verify no console.logs

#### 3. Remove Unused Code

**Check for:**
- Commented-out code blocks
- Old implementations
- Debug console.logs
- Unused CSS classes
- Unused components/imports

**login.vue specific:**
```vue
// Remove these if not used:
const form = ref({ ... })  // ❌ Not needed anymore
const isPasswordVisible = ref(false)  // ❌ Not needed

// Remove imports:
import AppTextField from '...'  // ❌ Not used anymore
```

#### 4. Add Comments (Where Needed)

**Good places for comments:**

```vue
<!-- auth-callback.vue -->
<script setup>
// Parse OAuth callback token from URL
// Backend can return token via query (?token=...) or fragment (#token=...)
const urlParams = new URLSearchParams(window.location.search)
const hashParams = new URLSearchParams(window.location.hash.substring(1))

// Basic JWT validation: must have 3 parts (header.payload.signature)
if (token.split('.').length === 3) {
  // Token format is valid, save to localStorage
  ...
}
</script>
```

```vue
<!-- AuthProvider.vue -->
<script setup>
// Redirect to backend OAuth endpoints
// Backend handles OAuth flow and redirects back with token
const loginWithOAuth = (provider) => {
  ...
}
</script>
```

#### 5. Git Commit Best Practices

**Create meaningful commits:**
```bash
git add frontend/.env.example
git commit -m "feat: add environment configuration template"

git add frontend/src/views/pages/authentication/AuthProvider.vue
git commit -m "feat: update AuthProvider to use Google and GitHub OAuth"

git add frontend/src/pages/login.vue
git commit -m "feat: simplify login page UI to OAuth-only"

git add frontend/src/pages/auth-callback.vue
git commit -m "feat: add OAuth callback handler page"

git add frontend/src/router/...  # if needed
git commit -m "feat: add /auth/callback route"

# Error handling
git commit -m "feat: add error handling and UX polish to login flow"
```

**Or single commit nếu prefer:**
```bash
git add frontend/
git commit -m "feat: implement OAuth login with Google and GitHub

- Add environment configuration (.env.example)
- Update AuthProvider component to show only Google/GitHub
- Simplify login page UI (remove email/password form)
- Add OAuth callback handler page
- Add error handling and user-friendly messages
- Support dark/light mode and responsive design

Co-Authored-By: Claude <noreply@anthropic.com>"
```

#### 6. Code Review Checklist

**Self-review before requesting review:**
- [ ] Code follows Vue 3 Composition API best practices
- [ ] No security issues (token handling, XSS prevention)
- [ ] Error handling comprehensive
- [ ] User experience smooth and intuitive
- [ ] No hardcoded values (use env variables)
- [ ] Comments explain WHY, not WHAT
- [ ] No TODO comments left (hoặc tracked as issues)
- [ ] Files properly organized
- [ ] No magic numbers/strings

**Request review from:**
- Senior developer
- Team lead
- Security review (nếu có)

### Documentation

**Update if needed:**
- README.md - Add OAuth login setup instructions
- CHANGELOG.md - Document feature changes
- Inline code comments - Complex logic only

## Dependencies

- [x] Task 72: Manual testing completed
- [x] All bugs from testing fixed

## Effort Estimate

- Size: S
- Hours: 2 hours
- Parallel: false (final task)

## Definition of Done

- [x] ESLint clean: `npm run lint` returns 0 errors
- [x] No console warnings in browser
- [x] Unused code removed
- [x] Meaningful comments added
- [x] Git commits clean và meaningful
- [x] Code review requested
- [x] Code review approved
- [x] Ready to merge
- [x] Documentation updated (if needed)
- [x] Changelog updated (if applicable)
