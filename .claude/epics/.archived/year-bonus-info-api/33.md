---
name: Add Pydantic schemas for year bonus data
status: completed
created: 2026-01-10T07:10:50Z
updated: 2026-01-10T09:01:56Z
github: https://github.com/PATCoder97/fhs-prosight/issues/33
depends_on: []
parallel: false
conflicts_with: []
---

# Task: Add Pydantic Schemas for Year Bonus Data

## Description

Add `YearBonusData` and `YearBonusResponse` Pydantic models to the existing `backend/app/schemas/hrs_data.py` file. These schemas define the structure for year-end bonus API responses with 8 fields from HRS API (pre-Tet and post-Tet bonus data).

Total new code: ~40 lines.

## Acceptance Criteria

- [ ] `YearBonusData` model created with 8 optional fields
- [ ] `YearBonusResponse` model created wrapping employee info + bonus data
- [ ] All fields properly typed as `Optional[str]` to handle partial data
- [ ] Field descriptions in Vietnamese match user-provided names
- [ ] Example data provided in `Config.json_schema_extra`
- [ ] File syntax validates (no Python errors)

## Technical Details

**File to modify**: `backend/app/schemas/hrs_data.py`

**Add to end of file** (after existing Achievement schemas):

```python
# Year Bonus Schemas

class YearBonusData(BaseModel):
    """Year bonus data fields."""
    mnv: Optional[str] = Field(None, description="Mã nhân viên")
    tlcb: Optional[str] = Field(None, description="Tổng lương cơ bản")
    stdltbtn: Optional[str] = Field(None, description="Số tháng đóng BHTN")
    capbac: Optional[str] = Field(None, description="Cấp bậc")
    tile: Optional[str] = Field(None, description="Tỷ lệ")
    stienthuong: Optional[str] = Field(None, description="Số tiền thưởng")
    tpnttt: Optional[str] = Field(None, description="Thưởng phần NT trước Tết")
    tpntst: Optional[str] = Field(None, description="Thưởng phần NT sau Tết")

    class Config:
        json_schema_extra = {
            "example": {
                "mnv": "VNW0006204",
                "tlcb": "15000000",
                "stdltbtn": "12",
                "capbac": "Senior",
                "tile": "100",
                "stienthuong": "5000000",
                "tpnttt": "2500000",
                "tpntst": "2500000"
            }
        }

class YearBonusResponse(BaseModel):
    """Response model for year bonus queries."""
    employee_id: str = Field(..., description="Employee ID (Mã nhân viên)")
    employee_name: str = Field(..., description="Employee name (Tên nhân viên)")
    year: int = Field(..., description="Bonus year (Năm thưởng)")
    bonus_data: YearBonusData = Field(..., description="Year bonus details")

    class Config:
        json_schema_extra = {
            "example": {
                "employee_id": "VNW0006204",
                "employee_name": "PHAN ANH TUẤN",
                "year": 2024,
                "bonus_data": {
                    "mnv": "VNW0006204",
                    "tlcb": "15000000",
                    "stdltbtn": "12",
                    "capbac": "Senior",
                    "tile": "100",
                    "stienthuong": "5000000",
                    "tpnttt": "2500000",
                    "tpntst": "2500000"
                }
            }
        }
```

**Pattern to follow**: Mirror the structure of Achievement schemas in the same file

**Imports needed**: Already exist in the file (BaseModel, Field, Optional)

## Dependencies

- [ ] No external dependencies
- [ ] File `backend/app/schemas/hrs_data.py` exists (from existing codebase)

## Effort Estimate

- Size: XS
- Hours: 1 hour
- Parallel: false (first task in the sequence)

## Definition of Done

- [ ] Code implemented and added to hrs_data.py
- [ ] File syntax validates (no Python errors)
- [ ] All 8 fields in YearBonusData are Optional[str]
- [ ] Field descriptions match Vietnamese names provided by user
- [ ] Example data in Config matches expected response format
- [ ] Committed with message: "Issue #XX: Add Pydantic schemas for year bonus data"
- [ ] No breaking changes to existing schemas
